<?xml version="1.0"?>
<ruleset name="Request PHP Client PMD">
  <description>PHPMD rules approximating SonarJS checks</description>

  <exclude-pattern>vendor/*</exclude-pattern>
  <exclude-pattern>generated/*</exclude-pattern>
  <exclude-pattern>specs/*</exclude-pattern>
  <exclude-pattern>tests/*</exclude-pattern>
  <exclude-pattern>src/RequestClient.php</exclude-pattern>

  <!-- Enable core rule sets early to avoid drift. -->
  <rule ref="rulesets/codesize.xml">
    <exclude name="CyclomaticComplexity"/>
    <exclude name="NPathComplexity"/>
  </rule>
  <rule ref="rulesets/cleancode.xml"/>
  <rule ref="rulesets/unusedcode.xml"/>
  <rule ref="rulesets/naming.xml"/>
  <!-- design.xml skipped: the StaticAccess rule conflicts with factory patterns; we enforce via reviews. -->
  <!-- design.xml omitted for now (StaticAccess is too strict for factory methods) -->

  <!-- Cognitive/Cyclomatic complexity thresholds -->
  <rule ref="rulesets/codesize.xml/CyclomaticComplexity">
    <properties>
      <property name="reportLevel" value="15"/>
    </properties>
  </rule>
  <rule ref="rulesets/codesize.xml/NPathComplexity">
    <properties>
      <property name="minimum" value="200"/>
    </properties>
  </rule>
</ruleset>
